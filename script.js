const cardsData = [
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house1.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa1.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "London, England",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment1.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Rome",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house2.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa2.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "South Island, New Zealand",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment2.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Santa Ana, Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house1.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa3.jpg",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "London, England",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment3.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Santa Ana, Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house3.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa4.jpg",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "London, England",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment4.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Santa Ana, Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house1.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa1.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "South Island, New Zealand",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment1.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Santa Ana, Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house2.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa1.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "Rome",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment4.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house1.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa1.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "South Dakota",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment1.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Santa Ana, Illinois",
        "badge": "Best Deals"
    },
    {
        "type": "house",
        "title": "Roselands House",
        "price": "$35,000,000",
        "image": "./images/house1.png",
        "author": "Dianne Russell",
        "avatar": "./images/diane.png",
        "location": "Manchester, Kentucky",
        "badge": "Popular"
    },
    {
        "type": "villa",
        "title": "Sunset Villa",
        "price": "$50,000,000",
        "image": "./images/villa1.png",
        "author": "Robert Fox",
        "avatar": "./images/Darlene.png",
        "location": "Phuket",
        "badge": "New Villa"
    },
    {
        "type": "apartment",
        "title": "City View Apartment",
        "price": "$25,000,000",
        "image": "./images/apartment1.jpg",
        "author": "Ronald Richards",
        "avatar": "./images/person2.jpg",
        "location": "Costa Rica",
        "badge": "Best Deals"
    }
];

const reviewsData = [
    {
        "image": "./images/review_house1.png",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review2.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    },
    {
        "image": "./images/review_house3.jpg",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review3.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    },{
        "image": "./images/review4.jpg",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review5.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    },{
        "image": "./images/review6.jpg",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review7.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    },{
        "image": "./images/review8.jpg",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review9.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    },{
        "image": "./images/review11.jpf",
        "title": "Best! I Got The House I Wanted Through Hounter",
        "content": "Through this website I can get a house with the type and specifications I want very easily, without a complicated process to be able to find information on the house we want.",
        "authorImage": "./images/Diane.png",
        "authorName": "Dianne Russell",
        "authorTitle": "Manager Director",
        "rating": 4.6
    },
    {
        "image": "./images/review10.jpg",
        "title": "Through The Hounter, I Can Get A House For My Family",
        "content": "By looking for information through Hounter, I was able to find the house we wanted without having to ask about the details of the house. Thank you Hounter!",
        "authorImage": "./images/Esther.png",
        "authorName": "Esther Howard",
        "authorTitle": "Head of Marketing",
        "rating": 4.3
    }
];


document.addEventListener('DOMContentLoaded', (event) => {
    const videoFrame = document.querySelector('.video-frame');
    const videoContainer = document.querySelector('.tour-images');

    videoFrame.addEventListener('click', () => {
        videoFrame.classList.toggle('active');
        if (videoFrame.classList.contains('active')) {
            videoContainer.classList.add('video-playing');
        } else {
            videoContainer.classList.remove('video-playing');
        }
    });

    const leftCards = document.querySelectorAll('.grid-left .card');
    const rightCard = document.querySelector('.grid-right .card');

    leftCards.forEach(card => {
        card.addEventListener('click', () => {
            swapContent(card, rightCard);
        });
    });

    function swapContent(leftCard, rightCard) {
        // Save left card content
        const leftImageSrc = leftCard.querySelector('.card-image img').src;
        const leftAuthorImageSrc = leftCard.querySelector('.article-meta img').src;
        const leftAuthorName = leftCard.querySelector('.article-meta div h3').textContent;
        const leftTitle = leftCard.querySelector('.article-title').textContent;
        const leftReadTime = leftCard.querySelector('.read-time p').textContent;
        const leftDescription = leftCard.querySelector('.description') ? leftCard.querySelector('.description').textContent : '';

        // Save right card content
        const rightImageSrc = rightCard.querySelector('.card-image img').src;
        const rightAuthorImageSrc = rightCard.querySelector('.article-meta img').src;
        const rightAuthorName = rightCard.querySelector('.article-meta div h3').textContent;
        const rightTitle = rightCard.querySelector('.article-title').textContent;
        const rightReadTime = rightCard.querySelector('.read-time p').textContent;
        const rightDescription = rightCard.querySelector('.description').textContent;

        // Swap with right card content
        leftCard.querySelector('.card-image img').src = rightImageSrc;
        leftCard.querySelector('.article-meta img').src = rightAuthorImageSrc;
        leftCard.querySelector('.article-meta div h3').textContent = rightAuthorName;
        leftCard.querySelector('.article-title').textContent = rightTitle;
        leftCard.querySelector('.read-time p').textContent = rightReadTime;
        if (leftCard.querySelector('.description')) {
            leftCard.querySelector('.description').textContent = rightDescription;
        }

        // Update right card content
        rightCard.querySelector('.card-image img').src = leftImageSrc;
        rightCard.querySelector('.article-meta img').src = leftAuthorImageSrc;
        rightCard.querySelector('.article-meta div h3').textContent = leftAuthorName;
        rightCard.querySelector('.article-title').textContent = leftTitle;
        rightCard.querySelector('.read-time p').textContent = leftReadTime;
        rightCard.querySelector('.description').textContent = leftDescription;
    }

    // Smooth scroll to section
    const footerLinks = document.querySelectorAll('.footer-links a');
    footerLinks.forEach(link => {
        link.addEventListener('click', (event) => {
            event.preventDefault();
            const sectionId = event.target.getAttribute('href').substring(1);
            const section = document.getElementById(sectionId);
            section.scrollIntoView({ behavior: 'smooth' });

            // Update the filter
            if (sectionId === 'recommendation') {
                const type = event.target.textContent.toLowerCase();
                filterCards(type);
            }
        });
    });

    renderCards();
    startReviewCarousel();
});

let currentPage = 1;
const cardsPerPage = 3;
let currentFilter = 'house';
let currentReviewIndex = 0;

function renderCards() {
    const container = document.getElementById('cards-container');
    container.innerHTML = '';
    const filteredCards = cardsData.filter(card => card.type === currentFilter);
    const startIndex = (currentPage - 1) * cardsPerPage;
    const endIndex = startIndex + cardsPerPage;
    let cardsToShow = filteredCards.slice(startIndex, endIndex);

    // Add the first card from the array if there are less than 3 cards
    while (cardsToShow.length < cardsPerPage) {
        cardsToShow.push(filteredCards[0]);
    }

    cardsToShow.forEach(card => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('house-card');
        cardElement.innerHTML = `
            <div class="image-container">
                <img src="${card.image}" alt="${card.title}">
                <div class="badge ${card.type}">${card.badge}</div>
            </div>
            <h3>${card.title}</h3>
            <p class="price">${card.price}</p>
            <div class="author-info">
                <img src="${card.avatar}" alt="${card.author}">
                <div>
                    <p>${card.author}</p>
                    <p class="location" title="Open in Maps">${card.location}</p>
                </div>
            </div>
        `;
        container.appendChild(cardElement);
    });

    document.getElementById('page-indicator').innerText = `Page ${currentPage}`;

    // Add event listeners for location elements
    const locationElements = document.querySelectorAll('.location');
    locationElements.forEach(element => {
        element.addEventListener('click', function() {
            const location = this.textContent;
            const query = encodeURIComponent(location);
            const url = `https://www.google.com/maps/search/?api=1&query=${query}`;
            window.open(url, '_blank');
        });
    });
}

function filterCards(type) {
    currentFilter = type;
    currentPage = 1;
    document.querySelectorAll('.filter-buttons button').forEach(button => button.classList.remove('active'));
    document.querySelector(`.filter-buttons button[onclick="filterCards('${type}')"]`).classList.add('active');
    renderCards();
}

function prevPage() {
    if (currentPage > 1) {
        currentPage--;
        renderCards();
    }
}

function nextPage() {
    const filteredCards = cardsData.filter(card => card.type === currentFilter);
    const totalPages = Math.ceil(filteredCards.length / cardsPerPage);
    if (currentPage < totalPages) {
        currentPage++;
        renderCards();
    }
}

function renderReviews() {
    const reviewsContainer = document.getElementById('reviews-container');
    reviewsContainer.innerHTML = '';
    const reviewsToShow = reviewsData.slice(currentReviewIndex, currentReviewIndex + 2);

    reviewsToShow.forEach(review => {
        const reviewElement = document.createElement('div');
        reviewElement.classList.add('review-card');
        reviewElement.innerHTML = `
            <img src="${review.image}" alt="Review Image">
            <div class="review-content">
                <h3>${review.title}</h3>
                <p>${review.content}</p>
                <div class="review-author">
                    <img src="${review.authorImage}" alt="${review.authorName}">
                    <div>
                        <p class="author-name">${review.authorName}</p>
                        <p class="author-title">${review.authorTitle}</p>
                    </div>
                    <div class="rating">
                        <img src="./images/star.png" alt="Star">
                        <p>${review.rating}</p>
                    </div>
                </div>
            </div>
        `;
        reviewsContainer.appendChild(reviewElement);
    });

    currentReviewIndex += 2;
    if (currentReviewIndex >= reviewsData.length) {
        currentReviewIndex = 0;
    }
}

function startReviewCarousel() {
    renderReviews();
    setInterval(renderReviews, 5000);
}

document.addEventListener('DOMContentLoaded', (event) => {
    const modal = document.getElementById("modal");
    const btn = document.getElementById("sign-up-btn");
    const span = document.getElementsByClassName("close")[0];

    btn.onclick = function() {
        modal.style.display = "block";
    }

    span.onclick = function() {
        modal.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    document.getElementById("registration-form").addEventListener("submit", function(event) {
        event.preventDefault();
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirm-password").value;

        if (name === "") {
            alert("Name cannot be empty.");
            return;
        }

        if (password.length < 6) {
            alert("Password must be at least 6 characters long.");
            return;
        }

        const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[~!?@#$%^&*_\-+(){}\[\]<>/\\|"'.,:]).{6,}$/;
        if (!passwordRegex.test(password)) {
            alert("Password must contain at least one uppercase letter, one lowercase letter, one digit, and one special character.");
            return;
        }

        if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return;
        }

        const users = JSON.parse(localStorage.getItem("users")) || [];

        const userExists = users.some(user => user.email === email);
        if (userExists) {
            alert("Email is already registered!");
            return;
        }

        users.push({ name: name, email: email, password: password });

        localStorage.setItem("users", JSON.stringify(users));

        alert("Registration successful!");
        modal.style.display = "none";

        document.getElementById("registration-form").reset();
    });
});
